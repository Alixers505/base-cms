import gql from 'graphql-tag';
import { asArray } from '@base-cms/utils';

$ const queryFragment = gql`
  fragment IssueContentMagazineScheduleQueryFragment on Content {
    id
    type
    shortName
    teaser
    canonicalPath
    published
    company {
      id
      type
      name
      canonicalPath
    }
    primarySection {
      id
      name
      fullName
      canonicalPath
    }
    primaryImage {
      id
      src
      alt
    }
  }
`;

$ const block = 'magazine-issue-content';
$ const params = {
  ...input,
  limit: 15,
  queryFragment,
};

<cms-query-magazine-scheduled-content|{ nodes, pageInfo }| ...params>
  <content-flow-card-deck-a nodes=nodes.slice(0, 11) />
  <content-flow-card-list-a nodes=nodes.slice(11) />
  <cms-load-more-element
    blockName="magazine-block-issue-content"
    params=params
    page-info=pageInfo
    button-class-obj={ btn: true, 'btn-lg': true, 'btn-primary': true }
    wrapping-class-obj={ 'text-center': true, 'pb-3': true }
  />
</cms-query-magazine-scheduled-content>
