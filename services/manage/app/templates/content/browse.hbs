{{!-- @todo This should be a main element, but CT has overflow hidden --}}
<div class="browse">
  <nav class="navbar navbar-dark">
    <div class="container-fluid">

      <a class="navbar-brand">
        <img src="/{{rootURL}}logo-default.png" alt="BaseCMS" height="30">
      </a>

      {{!-- @todo This needs to be re-worked --}}
      {{search-form}}

      {{!-- @todo This needs to be re-worked --}}
      {{user-nav}}

    </div>
  </nav>

  <section class="list bg-browse mb-6">

    <div class="header bg-gradient-primary pb-8 pt-5 pt-md-8">
      <div class="separator separator-bottom separator-skew zindex-100">
        <svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <polygon class="fill-browse" points="2560 0 2560 100 0 100"></polygon>
        </svg>
      </div>
    </div>

    <div class="container-fluid mt--8">
      {{#fetch-more
        query=observable
        edges=model.edges
        hasNextPage=model.pageInfo.hasNextPage
        endCursor=model.pageInfo.endCursor
        resultKey="allContent"
      as |fetch|
      }}
        <div class="row">
          {{#each fetch.nodes as |item|}}
            {{content-card
              content=item
              attributionType=attribution
              contentQueue=contentQueue
              onQueueChange=(action "queue")
            }}
          {{/each}}
        </div>

        {{in-view on-viewport-enter=(action fetch.actions.loadMore)}}
        {{#if fetch.isFetching}}
          <div class="sk-double-bounce mx-auto my-0">
            <div class="sk-child sk-double-bounce1 bg-primary z-depth-1"></div>
            <div class="sk-child sk-double-bounce2 bg-primary z-depth-1"></div>
          </div>
        {{/if}}
      {{/fetch-more}}
    </div>
  </section>

  {{content/browse/left-menu
    activeTabKey=active-tab
    facets=facets
    selectedContentTypes=selectedContentTypes
    on-content-type-click=(action "toggleContentTypes")
    on-content-type-clear=(action "clearContentTypes")
  }}

  <div class="footer-controls left">
    {{btn-scroll-top}}
  </div>

  <div class="footer-controls right">
    {{content/create-btn}}
  </div>

</div>

{{outlet}}
